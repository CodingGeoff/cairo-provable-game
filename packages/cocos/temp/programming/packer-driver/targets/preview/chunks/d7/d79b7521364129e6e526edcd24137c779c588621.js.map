{"version":3,"sources":["file:///Users/ruoyan/Desktop/WorkSpace/cairo-provable-game/packages/cocos/assets/script/scenes/Hero/Canvas/HeroUi.ts"],"names":["_decorator","Component","director","util","getConfig","HeroAllHeros","CharacterEnum","ccclass","property","HeroUi","$currentCamp","GoBack","close","message","load","preloadScene","loadScene","filterByCamp","e","camp","allHeros","node","parent","getChildByName","getComponent","cahracterQueue","children","forEach","lightNode","active","config","userData","characterQueue","cq","c","push","concat","characters","render","filter","id","CharacterCamp","target"],"mappings":"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","sourcesContent":["import { _decorator, Component, director, EventMouse, Node } from 'cc';\nimport { util } from '../../../util/util';\nimport { getConfig } from '../../../common/config/config';\nimport { HeroAllHeros } from './HeroAllHeros';\nimport { CharacterStateCreate } from '../../../game/fight/character/CharacterState';\nimport { CharacterEnum } from '../../../game/fight/character/CharacterEnum';\nconst { ccclass, property } = _decorator;\n\n@ccclass('HeroUi')\nexport class HeroUi extends Component {\n    \n    // 回到主页\n    async GoBack() {\n        const close = await util.message.load()\n        director.preloadScene(\"Home\" , () => close())\n        director.loadScene(\"Home\")\n    }\n\n    // 当前过滤阵容\n    private $currentCamp: string = \"\"\n    // 阵容过滤\n    async filterByCamp(e: EventMouse , camp: string) {\n        const allHeros = this.node.parent.getChildByName(\"AllHeros\").getComponent(HeroAllHeros)\n        let cahracterQueue: CharacterStateCreate[] = []\n        this.node.children.forEach(node => {\n            const lightNode = node.getChildByName(\"Light\")\n            if (lightNode) lightNode.active = false\n        })\n        if (this.$currentCamp === camp) {\n            const config = getConfig()\n            const close = await util.message.load()\n            config.userData.characterQueue.forEach(cq => cq.forEach(c => { if(c) cahracterQueue.push(c) }))\n            cahracterQueue = cahracterQueue.concat(config.userData.characters)\n            await allHeros.render(cahracterQueue)\n            close()\n            this.$currentCamp = \"\"\n        } else {\n            this.$currentCamp = camp\n            const config = getConfig()\n            const close = await util.message.load()\n            config.userData.characterQueue.forEach(cq => cq.forEach(c => { if(c) cahracterQueue.push(c) }))\n            cahracterQueue = cahracterQueue.concat(config.userData.characters)\n            cahracterQueue = cahracterQueue.filter(c => CharacterEnum[c.id].CharacterCamp === camp)\n            await allHeros.render(cahracterQueue)\n            close()\n            e.target.getChildByName(\"Light\").active = true\n        }\n    }\n}\n\n"]}