{"version":3,"sources":["file:///Users/ruoyan/Desktop/WorkSpace/LegendOfWarcraftHeroes/assets/script/prefab/HolCharactersQueue.ts"],"names":["_decorator","Button","Component","Node","Prefab","util","HolCharacterAvatar","ccclass","property","HolCharactersQueue","render","characters","clickFun","nodePool","resource","getNodePool","bundle","load","childrens","ContentNode","children","i","length","node","off","getComponent","transition","put","get","characterAvatar","setCharacter","character","zoomScale","addChild","on"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;;AAErCC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,kB,iBAAAA,kB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;oCAGjBS,kB,WADZF,OAAO,CAAC,oBAAD,C,UAGHC,QAAQ,CAACL,IAAD,C,2BAHb,MACaM,kBADb,SACwCP,SADxC,CACkD;AAAA;AAAA;;AAC9C;AAD8C;AAAA;;AAK9C;AACMQ,QAAAA,MAAM,CAACC,UAAD,EAAsCC,QAAtC,EAAyG;AAAA;;AAAA;AACjH,gBAAMC,QAAQ,GAAG;AAAA;AAAA,8BAAKC,QAAL,CAAcC,WAAd,OACP;AAAA;AAAA,8BAAKC,MAAL,CAAYC,IAAZ,CAAiB,2BAAjB,EAA+Cb,MAA/C,CADO,CAAjB;AAGA,gBAAMc,SAAS,GAAG,CAAC,GAAG,KAAI,CAACC,WAAL,CAAiBC,QAArB,CAAlB;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,SAAS,CAACI,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACvC,kBAAME,KAAI,GAAGL,SAAS,CAACG,CAAD,CAAtB;;AACAE,cAAAA,KAAI,CAACC,GAAL,CAAS,OAAT;;AACAD,cAAAA,KAAI,CAACE,YAAL,CAAkBxB,MAAlB,EAA0ByB,UAA1B,GAAuC,CAAvC;AACAb,cAAAA,QAAQ,CAACc,GAAT,CAAaJ,KAAb;AACH;;AAVgH,mDAW7E;AAChC,kBAAMA,IAAI,GAAGV,QAAQ,CAACe,GAAT,EAAb;AACA,kBAAMC,eAAe,GAAGN,IAAI,CAACE,YAAL;AAAA;AAAA,2DAAxB;AACAI,cAAAA,eAAe,CAACC,YAAhB,CAA6BC,SAA7B;AACAR,cAAAA,IAAI,CAACE,YAAL,CAAkBxB,MAAlB,EAA0ByB,UAA1B,GAAuC,CAAvC;AACAH,cAAAA,IAAI,CAACE,YAAL,CAAkBxB,MAAlB,EAA0B+B,SAA1B,GAAsC,GAAtC;;AACA,cAAA,KAAI,CAACb,WAAL,CAAiBc,QAAjB,CAA0BV,IAA1B,EANgC,CAOhC;;;AACAA,cAAAA,IAAI,CAACW,EAAL,CAAQ,OAAR,EAAkB,MAAM;AAAC,oBAAItB,QAAJ,EAAcA,QAAQ,CAACmB,SAAD,EAAaR,IAAb,CAAR;AAA2B,eAAlE;AARgC;AAUnC,aArBgH;;AAWjH,iBAAK,IAAMQ,SAAX,IAAwBpB,UAAxB;AAAA;;AAAA,uCASI;AATJ;;AAWA;AAtBiH;AAuBpH;;AA7B6C,O","sourcesContent":["import { _decorator, Button, Component, Node, Prefab } from 'cc';\nimport { CharacterStateCreate } from '../game/fight/character/CharacterState';\nimport { util } from '../util/util';\nimport { HolCharacterAvatar } from './HolCharacterAvatar';\nconst { ccclass, property } = _decorator;\n\n@ccclass('HolCharactersQueue')\nexport class HolCharactersQueue extends Component {\n    // 内容节点\n    @property(Node)\n    ContentNode: Node\n\n    // 渲染函数\n    async render(characters: CharacterStateCreate[] , clickFun?: (characters: CharacterStateCreate , node: Node) => any) {\n        const nodePool = util.resource.getNodePool(\n            await util.bundle.load(\"prefab/HolCharacterAvatar\" , Prefab)\n        )\n        const childrens = [...this.ContentNode.children]\n        for (let i = 0; i < childrens.length; i++) {\n            const node = childrens[i];\n            node.off(\"click\")\n            node.getComponent(Button).transition = 0\n            nodePool.put(node)\n        }\n        for (const character of characters) {\n            const node = nodePool.get()\n            const characterAvatar = node.getComponent(HolCharacterAvatar)\n            characterAvatar.setCharacter(character)\n            node.getComponent(Button).transition = 3\n            node.getComponent(Button).zoomScale = 0.9\n            this.ContentNode.addChild(node)\n            // 绑定事件\n            node.on(\"click\" , () => {if (clickFun) clickFun(character , node)})\n            continue\n        }\n        return\n    }\n}\n\n"]}