{"version":3,"sources":["file:///Users/ruoyan/Desktop/WorkSpace/LegendOfWarcraftHeroes/assets/script/scenes/Hero/Canvas/HeroCharacterDetail.ts"],"names":["_decorator","Component","instantiate","Node","Prefab","util","HolAnimation","CharacterEnum","HeroCharacterDetailPorperty","HeroAllHeros","getConfig","ccclass","property","HeroCharacterDetail","$lastaNimation","goBack","node","active","config","close","message","load","cahracterQueue","userData","characterQueue","forEach","cq","c","push","HeroAllHeroNode","getComponent","render","concat","characters","n","characterDetail","parent","getChildByName","setCharacter","create","propertyNode","characterAnimationNode","removeChild","meta","id","holAnimationPrefab","bundle","holAnimationNode","addChild","initBones","animationScale","AnimationScale","animationDir","AnimationDir","animationType","AnimationType","animationPosition","AnimationPosition","renderProperty","setTimeout","playAnimation"],"mappings":"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","sourcesContent":["import { _decorator, Component, instantiate, Node, Prefab } from 'cc';\nimport { CharacterStateCreate } from '../../../game/fight/character/CharacterState';\nimport { HolCharacter } from '../../../prefab/HolCharacter';\nimport { util } from '../../../util/util';\nimport { HolAnimation } from '../../../prefab/HolAnimation';\nimport { CharacterEnum } from '../../../game/fight/character/CharacterEnum';\nimport { HeroCharacterDetailPorperty } from './CharacterDetail/HeroCharacterDetailPorperty';\nimport { HeroAllHeros } from './HeroAllHeros';\nimport { getConfig } from '../../../common/config/config';\nconst { ccclass, property } = _decorator;\n\n@ccclass('HeroCharacterDetail')\nexport class HeroCharacterDetail extends Component {\n\n    // 所有角色的节点\n    @property(Node)\n    HeroAllHeroNode: Node\n\n    // 返回\n    async goBack() {\n        this.node.active = false\n        const config = getConfig()\n        const close = await util.message.load()\n        const cahracterQueue = []\n        config.userData.characterQueue.forEach(cq => cq.forEach(c => { if(c) cahracterQueue.push(c) }))\n        await this.HeroAllHeroNode.getComponent(HeroAllHeros).render([].concat(cahracterQueue , config.userData.characters) , async (c , n) => {\n            const characterDetail = this.node.parent.getChildByName(\"CharacterDetail\")\n            characterDetail.active = true\n            await characterDetail.getComponent(HeroCharacterDetail).setCharacter(c)\n        })\n        close()\n    }\n\n    // 上一次的角色动画\n    private $lastaNimation: Node\n    // 设置角色\n    async setCharacter(create: CharacterStateCreate) {\n        const propertyNode = this.node.getChildByName(\"Property\")\n        const close = await util.message.load()\n        const characterAnimationNode = this.node.getChildByName(\"CharacterAnimation\")\n        if (this.$lastaNimation) characterAnimationNode.removeChild(this.$lastaNimation)\n        const meta = CharacterEnum[create.id]\n        const holAnimationPrefab = await util.bundle.load(\"prefab/HolAnimation\" , Prefab)\n        const holAnimationNode = instantiate(holAnimationPrefab)\n        characterAnimationNode.addChild(holAnimationNode)\n        await holAnimationNode.getComponent(HolAnimation).initBones({\n            animationScale: meta.AnimationScale * 1.7 ,\n            animationDir: meta.AnimationDir ,\n            animationType: meta.AnimationType ,\n            animationPosition: meta.AnimationPosition\n        })\n        characterAnimationNode.addChild(holAnimationNode)\n        this.$lastaNimation = holAnimationNode\n        holAnimationNode.active = false\n        // 设置属性\n        await propertyNode.getComponent(HeroCharacterDetailPorperty).renderProperty(create)\n        close()\n        setTimeout(async () => {\n                holAnimationNode.active = true\n                holAnimationNode.getComponent(HolAnimation).playAnimation(\"rebirth\" , 1 , \"rest\")\n            } , 50\n        )\n        return\n    }\n\n\n}\n\n"]}