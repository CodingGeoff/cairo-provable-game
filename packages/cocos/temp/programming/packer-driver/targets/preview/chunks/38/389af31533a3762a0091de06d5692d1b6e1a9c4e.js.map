{"version":3,"sources":["file:///Users/ruoyan/Desktop/WorkSpace/LegendOfWarcraftHeroes/assets/script/common/config/config.ts"],"names":["Resource","VolumeDetail","UserData","Config","stockConfig","config","userData","backpack","filter","i","number","localStorage","setItem","JSON","stringify","getConfig","configJSON","getItem","parse","gold","diamond","soul","constructor","v","fight","home","character","Object","keys","forEach","k","globalId","or","lv","exp","name","equipments","characters","characterQueue","hasCollectCharacterId","addNewCharacter","id","star","equipment","addNewItem","c","e","addNewEquipment","cq","j","uuid","quality","push","indexOf","num","length","item","con","version","volume","volumeDetail"],"mappings":"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","sourcesContent":["import { CharacterStateCreate } from \"../../game/fight/character/CharacterState\"\nimport { EquipmentStateCreate } from \"../../game/fight/equipment/EquipmentState\"\nimport { ItemStateCreate } from \"../../game/fight/item/ItemState\"\n\nexport class Resource {\n    gold: number = 100000000\n    diamond: number = 100000\n    soul: number = 100000000\n}\n\nclass VolumeDetail {\n    // 战斗音量\n    fight: number = 1\n    // 家园音量\n    home: number = 1\n    // 角色音量\n    character: number = 1\n\n    constructor(v?: Partial<VolumeDetail>) {\n        if (!v) return\n        Object.keys(v).forEach(k => this[k] = v[k])\n    }\n}\n\nlet globalId: number = 1\n\nclass UserData extends Resource{\n\n    public lv: number = 1\n\n    public exp: number = 0\n\n    public name: string = \"用户12138\"\n\n    public backpack: ItemStateCreate[] = []\n\n    public equipments: EquipmentStateCreate[] = []\n\n    public characters: CharacterStateCreate[] = []\n\n    public characterQueue: CharacterStateCreate[][] = [\n        [null , null , null] ,\n        [null , null , null] ,\n        [null , null , null]\n    ]\n\n    // 已经收集到的英雄\n    public hasCollectCharacterId: string[] = []\n\n    constructor(or?: Partial<UserData>) {\n        super()\n        // 测试角色\n        this.addNewCharacter({\n            id: \"sunwukong\" ,\n            lv: 100 ,\n            star: 3 ,\n            equipment: []\n        })\n        this.addNewCharacter({\n            id: \"fearOfDemons\" ,\n            lv: 90 ,\n            star: 1 ,\n            equipment: []\n        })\n        if (!or) { return }\n        this.lv = or.lv || 1\n        this.exp = or.exp || 1\n        this.gold = or.gold || 1000\n        this.diamond = or.diamond || 100\n        this.soul = or.soul || 1000\n        this.hasCollectCharacterId = or.hasCollectCharacterId || []\n        // 原有的物品\n        ;(or.backpack || []).forEach(i => this.addNewItem(i.id , i.number))\n        // 原有角色\n        ;(or.characters || []).forEach(c => { this.addNewCharacter(c) })\n        // 原有装备\n        ;(or.equipments || []).forEach(e => { this.addNewEquipment(e.id , e.lv) })\n        // 原有出战角色\n        ;or.characterQueue.forEach((cq , i) => cq.forEach((c , j) => this.characterQueue[i][j] = {...c , uuid: ++globalId}))\n    }\n\n    // 添加新装备\n    public addNewEquipment(id: string , lv?: number , quality?: number) {\n        this.equipments.push({\n            id ,\n            lv: lv || 1 ,\n            uuid: ++globalId ,\n            quality: quality || 1\n        })\n    }\n\n    // 添加新角色\n    public addNewCharacter(character: CharacterStateCreate) {\n        const equipment: EquipmentStateCreate[] = [];\n        (character.equipment || []).forEach(e => equipment.push({...e , uuid: ++globalId}))\n        this.characters.push({\n            ...character ,\n            star: character.star || 1 ,\n            equipment ,\n            uuid: ++globalId\n        })\n        if (this.hasCollectCharacterId.indexOf(character.id) === -1)\n            this.hasCollectCharacterId.push(character.id)\n    }\n\n    // 添加新物品\n    public addNewItem(id: string , num: number) {\n        for (let i = 0; i < this.backpack.length; i++) {\n            const item = this.backpack[i];\n            if (item.id === id) {\n                item.number += num\n                return\n            }\n        }\n        this.backpack.push({id , number: num})\n    }\n}\n\nclass Config {\n\n    // 版本\n    public version: string = \"0.0.1\"\n\n    // 总音量\n    public volume: number = 0.1\n\n    // 用户数据\n    public userData: UserData = new UserData()\n\n    // 详细音量\n    public volumeDetail: VolumeDetail = new VolumeDetail()\n\n    constructor(con?: Partial<Config>) {\n        if (!con) return\n        if (con.version !== this.version) return\n        Object.keys(con).forEach(k => this[k] = con[k])\n        this.userData = new UserData(con.userData)\n        this.volumeDetail = new VolumeDetail(con.volumeDetail)\n    }\n\n}\n\n// 如果没有用户数据则创建一个新的数据\nlet config: Config = null\n\n// 存储config信息\nexport function stockConfig() {\n    config.userData.backpack = config.userData.backpack.filter(i => i.number > 0)\n    localStorage.setItem(\"UserConfigData\" , JSON.stringify(config))\n}\n\n// 获取config\nexport function getConfig(): Config {\n    if (config) return config\n    const configJSON = localStorage.getItem(\"UserConfigData\")\n    config = configJSON ? new Config(JSON.parse( configJSON )) : new Config\n    return config\n}\n"]}