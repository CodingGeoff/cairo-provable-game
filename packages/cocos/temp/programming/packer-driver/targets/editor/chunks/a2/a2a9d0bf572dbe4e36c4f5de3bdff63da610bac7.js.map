{"version":3,"sources":["file:///Users/ruoyan/Desktop/WorkSpace/LegendOfWarcraftHeroes/assets/script/prefab/HolCharactersQueue.ts"],"names":["_decorator","Button","Component","Node","Prefab","util","HolCharacterAvatar","ccclass","property","HolCharactersQueue","render","characters","clickFun","nodePool","resource","getNodePool","bundle","load","childrens","ContentNode","children","i","length","node","off","getComponent","transition","put","character","get","characterAvatar","setCharacter","zoomScale","addChild","on"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;;AAErCC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,kB,iBAAAA,kB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;oCAGjBS,kB,WADZF,OAAO,CAAC,oBAAD,C,UAGHC,QAAQ,CAACL,IAAD,C,2BAHb,MACaM,kBADb,SACwCP,SADxC,CACkD;AAAA;AAAA;;AAC9C;AAD8C;AAAA;;AAK9C;AACY,cAANQ,MAAM,CAACC,UAAD,EAAsCC,QAAtC,EAAyG;AACjH,gBAAMC,QAAQ,GAAG;AAAA;AAAA,4BAAKC,QAAL,CAAcC,WAAd,CACb,MAAM;AAAA;AAAA,4BAAKC,MAAL,CAAYC,IAAZ,CAAiB,2BAAjB,EAA+Cb,MAA/C,CADO,CAAjB;AAGA,gBAAMc,SAAS,GAAG,CAAC,GAAG,KAAKC,WAAL,CAAiBC,QAArB,CAAlB;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,SAAS,CAACI,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACvC,kBAAME,IAAI,GAAGL,SAAS,CAACG,CAAD,CAAtB;AACAE,YAAAA,IAAI,CAACC,GAAL,CAAS,OAAT;AACAD,YAAAA,IAAI,CAACE,YAAL,CAAkBxB,MAAlB,EAA0ByB,UAA1B,GAAuC,CAAvC;AACAb,YAAAA,QAAQ,CAACc,GAAT,CAAaJ,IAAb;AACH;;AACD,eAAK,MAAMK,SAAX,IAAwBjB,UAAxB,EAAoC;AAChC,kBAAMY,IAAI,GAAGV,QAAQ,CAACgB,GAAT,EAAb;AACA,kBAAMC,eAAe,GAAGP,IAAI,CAACE,YAAL;AAAA;AAAA,yDAAxB;AACAK,YAAAA,eAAe,CAACC,YAAhB,CAA6BH,SAA7B;AACAL,YAAAA,IAAI,CAACE,YAAL,CAAkBxB,MAAlB,EAA0ByB,UAA1B,GAAuC,CAAvC;AACAH,YAAAA,IAAI,CAACE,YAAL,CAAkBxB,MAAlB,EAA0B+B,SAA1B,GAAsC,GAAtC;AACA,iBAAKb,WAAL,CAAiBc,QAAjB,CAA0BV,IAA1B,EANgC,CAOhC;;AACAA,YAAAA,IAAI,CAACW,EAAL,CAAQ,OAAR,EAAkB,MAAM;AAAC,kBAAItB,QAAJ,EAAcA,QAAQ,CAACgB,SAAD,EAAaL,IAAb,CAAR;AAA2B,aAAlE;AACA;AACH;;AACD;AACH;;AA7B6C,O","sourcesContent":["import { _decorator, Button, Component, Node, Prefab } from 'cc';\nimport { CharacterStateCreate } from '../game/fight/character/CharacterState';\nimport { util } from '../util/util';\nimport { HolCharacterAvatar } from './HolCharacterAvatar';\nconst { ccclass, property } = _decorator;\n\n@ccclass('HolCharactersQueue')\nexport class HolCharactersQueue extends Component {\n    // 内容节点\n    @property(Node)\n    ContentNode: Node\n\n    // 渲染函数\n    async render(characters: CharacterStateCreate[] , clickFun?: (characters: CharacterStateCreate , node: Node) => any) {\n        const nodePool = util.resource.getNodePool(\n            await util.bundle.load(\"prefab/HolCharacterAvatar\" , Prefab)\n        )\n        const childrens = [...this.ContentNode.children]\n        for (let i = 0; i < childrens.length; i++) {\n            const node = childrens[i];\n            node.off(\"click\")\n            node.getComponent(Button).transition = 0\n            nodePool.put(node)\n        }\n        for (const character of characters) {\n            const node = nodePool.get()\n            const characterAvatar = node.getComponent(HolCharacterAvatar)\n            characterAvatar.setCharacter(character)\n            node.getComponent(Button).transition = 3\n            node.getComponent(Button).zoomScale = 0.9\n            this.ContentNode.addChild(node)\n            // 绑定事件\n            node.on(\"click\" , () => {if (clickFun) clickFun(character , node)})\n            continue\n        }\n        return\n    }\n}\n\n"]}