{"version":3,"sources":["file:///Users/ruoyan/Desktop/WorkSpace/LegendOfWarcraftHeroes/assets/script/prefab/HolPromptMessage.ts"],"names":["_decorator","Component","Label","ccclass","property","HolPromptMessage","$state","$time","$continueTime","$closeQueue","setContent","option","node","getChildByName","getComponent","string","message","setScale","continueTime","update","dt","scale","x","y","z","forEach","c","listen","event","call","push"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;;;;;;;;;OAC1B;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U,GAE9B;;kCASaK,gB,WADZF,OAAO,CAAC,kBAAD,C,gBAAR,MACaE,gBADb,SACsCJ,SADtC,CACgD;AAAA;AAAA;AAE5C;AAF4C,eAGpCK,MAHoC,GAG3B,CAH2B;AAK5C;AAL4C,eAMpCC,KANoC,GAM5B,CAN4B;AAQ5C;AAR4C,eASpCC,aAToC,GASpB,CAToB;AAW5C;AAX4C,eAYpCC,WAZoC,GAYP,EAZO;AAAA;;AAc5C;AACAC,QAAAA,UAAU,CAACC,MAAD,EAA8B;AACpC;AACA,eAAKC,IAAL,CAAUC,cAAV,CAAyB,SAAzB,EAAoCC,YAApC,CAAiDZ,KAAjD,EAAwDa,MAAxD,GAAiEJ,MAAM,CAACK,OAAxE,CAFoC,CAGpC;;AACA,eAAKV,MAAL,GAAc,CAAd,CAJoC,CAKpC;;AACA,eAAKM,IAAL,CAAUK,QAAV,CAAmB,CAAnB,EAAuB,CAAvB,EAA2B,CAA3B,EANoC,CAOpC;;AACA,eAAKT,aAAL,GAAqBG,MAAM,CAACO,YAAP,IAAuB,CAA5C;AACH,SAxB2C,CA0B5C;;;AACUC,QAAAA,MAAM,CAACC,EAAD,EAAmB;AAC/B;AACA,cAAI,KAAKd,MAAL,KAAgB,CAApB,EAAuB;AACnB,gBAAI,KAAKM,IAAL,CAAUS,KAAV,CAAgBC,CAAhB,IAAqB,CAAzB,EAA4B;AACxB,mBAAKV,IAAL,CAAUK,QAAV,CAAmB,CAAnB,EAAqB,CAArB,EAAuB,CAAvB;AACA,mBAAKX,MAAL,GAAc,CAAd;AACA,mBAAKC,KAAL,GAAa,CAAb;AACH,aAJD,MAKI,KAAKK,IAAL,CAAUK,QAAV,CACI,KAAKL,IAAL,CAAUS,KAAV,CAAgBC,CAAhB,GAAoBF,EAAE,GAAG,EAD7B,EAEI,KAAKR,IAAL,CAAUS,KAAV,CAAgBE,CAAhB,GAAoBH,EAAE,GAAG,EAF7B,EAGI,KAAKR,IAAL,CAAUS,KAAV,CAAgBG,CAHpB;AAKP,WAXD,CAYA;AAZA,eAaK,IAAI,KAAKlB,MAAL,KAAgB,CAApB,EAAuB;AACxB,gBAAI,KAAKC,KAAL,IAAc,KAAKC,aAAvB,EAAsC,KAAKF,MAAL,GAAc,CAAd;AACtC,iBAAKC,KAAL,IAAca,EAAd;AACH,WAHI,CAIL;AAJK,eAKA,IAAI,KAAKd,MAAL,KAAgB,CAApB,EAAuB;AACxB,iBAAKG,WAAL,CAAiBgB,OAAjB,CAAyBC,CAAC,IAAIA,CAAC,EAA/B;AACH;;AACD;AACH,SAnD2C,CAqD5C;;;AACAC,QAAAA,MAAM,CAACC,KAAD,EAAkBC,IAAlB,EAAmC;AACrC,cAAID,KAAK,KAAK,OAAd,EAAuB;AACnB,iBAAKnB,WAAL,CAAiBqB,IAAjB,CAAsBD,IAAtB;AACH;AACJ;;AA1D2C,O","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\nconst { ccclass, property } = _decorator;\n\n// 内容参数\nexport type PromptMessageOption = {\n    // 提示内容\n    message: string\n    // 内容持续时间 单位 s\n    continueTime?: number\n}\n\n@ccclass('HolPromptMessage')\nexport class HolPromptMessage extends Component {\n\n    // 内容状态 0 开始 1 持续 2关闭\n    private $state = 0\n\n    // 内容在 1 的持续状态\n    private $time = 0\n\n    // 持续时间\n    private $continueTime = 1\n\n    // 关闭时的函数\n    private $closeQueue: (() => any)[] = []\n\n    // 设置内容\n    setContent(option: PromptMessageOption) {\n        // 设置游戏内容\n        this.node.getChildByName(\"Message\").getComponent(Label).string = option.message\n        // 设置状态开始\n        this.$state = 0\n        // 初始状态\n        this.node.setScale(0 , 0 , 0)\n        // 持续时间\n        this.$continueTime = option.continueTime || 1\n    }\n\n    // 帧行动\n    protected update(dt: number): void {\n        // 渐入\n        if (this.$state === 0) {\n            if (this.node.scale.x >= 1) {\n                this.node.setScale(1,1,1)\n                this.$state = 1\n                this.$time = 0\n            } else \n                this.node.setScale(\n                    this.node.scale.x + dt * 10 ,\n                    this.node.scale.y + dt * 10 ,\n                    this.node.scale.z\n                )\n        } \n        // 持续\n        else if (this.$state === 1) {\n            if (this.$time >= this.$continueTime) this.$state = 2\n            this.$time += dt\n        } \n        // 关闭\n        else if (this.$state === 2) {\n            this.$closeQueue.forEach(c => c())\n        }\n        return\n    }\n\n    // 监听关闭函数\n    listen(event: \"close\" , call: () => any) {\n        if (event === \"close\") {\n            this.$closeQueue.push(call)\n        }\n    }\n}\n\n"]}