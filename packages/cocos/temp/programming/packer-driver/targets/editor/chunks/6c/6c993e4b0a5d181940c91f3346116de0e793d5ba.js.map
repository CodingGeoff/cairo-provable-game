{"version":3,"sources":["file:///Users/ruoyan/Desktop/WorkSpace/cairo-provable-game/packages/cocos/assets/script/prefab/HolPreLoad.ts"],"names":["_decorator","Component","Label","Node","ccclass","property","HolPreLoad","$tips","$current","$process","$completeQueue","$currentIndex","$accumulateTime","setProcess","num","setTips","tips","listenComplete","com","push","update","dt","forEach","c","node","active","ValueNode","setScale","TipNode","getComponent","string","length"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;;;;;;;;;OACjC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;4BAGjBM,U,WADZF,OAAO,CAAC,YAAD,C,UAGHC,QAAQ,CAACF,IAAD,C,UAGRE,QAAQ,CAACF,IAAD,C,2BANb,MACaG,UADb,SACgCL,SADhC,CAC0C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAQ9BM,KAR8B,GAQZ,CAAC,UAAD,CARY;AAAA,eAU9BC,QAV8B,GAUX,CAVW;AAAA,eAW9BC,QAX8B,GAWX,CAXW;AAAA,eAa9BC,cAb8B,GAaD,EAbC;AAAA,eA2B9BC,aA3B8B,GA2BN,CA3BM;AAAA,eA4B9BC,eA5B8B,GA4BJ,CA5BI;AAAA;;AAetCC,QAAAA,UAAU,CAACC,GAAD,EAAc;AACpB,eAAKL,QAAL,GAAgBK,GAAhB;AACH;;AAEDC,QAAAA,OAAO,CAACC,IAAD,EAAiB;AACpB,eAAKT,KAAL,GAAaS,IAAb;AACH;;AAEDC,QAAAA,cAAc,CAACC,GAAD,EAAgB;AAC1B,eAAKR,cAAL,CAAoBS,IAApB,CAAyBD,GAAzB;AACH;;AAISE,QAAAA,MAAM,CAACC,EAAD,EAAmB;AAC/B,cAAI,KAAKb,QAAL,IAAiB,GAArB,EAA0B;AACtB,iBAAKE,cAAL,CAAoBY,OAApB,CAA4BC,CAAC,IAAIA,CAAC,EAAlC;AACA,iBAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA;AACH;;AACD,cAAI,KAAKjB,QAAL,GAAgB,KAAKC,QAAzB,EAAmC;AAC/B,iBAAKD,QAAL,IAAiBa,EAAE,GAAG,EAAtB;AACA,iBAAKK,SAAL,CAAeC,QAAf,CAAwB,KAAKnB,QAAL,GAAgB,GAAxC,EAA8C,CAA9C,EAAkD,CAAlD;AACH;;AACD,eAAKI,eAAL,IAAwBS,EAAxB;;AACA,cAAI,KAAKT,eAAL,IAAwB,CAA5B,EAA+B;AAC3B,iBAAKgB,OAAL,CAAaC,YAAb,CAA0B3B,KAA1B,EAAiC4B,MAAjC,GACI,KAAKvB,KAAL,CAAW,KAAKI,aAAhB,CADJ;AAEA,iBAAKA,aAAL;AACA,iBAAKC,eAAL,GAAuB,CAAvB;AACA,gBAAI,KAAKD,aAAL,IAAsB,KAAKJ,KAAL,CAAWwB,MAArC,EAA6C,KAAKpB,aAAL,GAAqB,CAArB;AAChD;AACJ;;AA/CqC,O","sourcesContent":["import { _decorator, Component, Label, Node } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('HolPreLoad')\nexport class HolPreLoad extends Component {\n\n    @property(Node)\n    public ValueNode: Node\n\n    @property(Node)\n    public TipNode: Node\n\n    private $tips: string[] = [\"战斗初始化ing\"]\n\n    private $current: number = 0\n    private $process: number = 0\n\n    private $completeQueue: Function[] = []\n\n    setProcess(num: number) {\n        this.$process = num\n    }\n\n    setTips(tips: string[]) {\n        this.$tips = tips\n    }\n\n    listenComplete(com: Function) {\n        this.$completeQueue.push(com)\n    }\n\n    private $currentIndex: number = 0\n    private $accumulateTime: number = 0\n    protected update(dt: number): void {\n        if (this.$current >= 100) {\n            this.$completeQueue.forEach(c => c())\n            this.node.active = false\n            return\n        }\n        if (this.$current < this.$process) {\n            this.$current += dt * 55\n            this.ValueNode.setScale(this.$current / 100 , 1 , 1)\n        }\n        this.$accumulateTime -= dt\n        if (this.$accumulateTime <= 0) {\n            this.TipNode.getComponent(Label).string = \n                this.$tips[this.$currentIndex]\n            this.$currentIndex++\n            this.$accumulateTime = 4\n            if (this.$currentIndex >= this.$tips.length) this.$currentIndex = 0 \n        }\n    }\n}\n\n"]}